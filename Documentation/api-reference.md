# Roku SDK API Usage

This document lists the APIs provided by Adobe Roku SDK, along with sample code snippets on how to properly use the APIs.

- [AdobeSDKInit](#AdobeSDKInit)
- [getVersion](#getVersion)
- [setLogLevel](#setLogLevel)
- [updateConfiguration](#updateConfiguration)
- [sendEdgeEvent](#sendEdgeEvent)
- [(optional) setExperienceCloudId](#setExperienceCloudId)
- [shutdown](#shutdown)

---

### AdobeSDKInit

Initialize the Adobe SDK and return the public API instance. `*` The following variables are reserved to hold SDK instances in GetGlobalAA():
- `GetGlobalAA()._adb_public_api`
- `GetGlobalAA()._adb_edge_task_node`

##### Syntax

```javascript
function AdobeSDKInit() as object
```

- `@return instance as object : public API instance`

##### Example

```javascript
  m.adobeEdgeSdk = AdobeSDKInit()
```

### getVersion

##### Syntax

```javascript
getVersion: function() as string
```
- `@return version as string`

##### Example 

```javascript
  sdkVersion = m.adobeEdgeSdk.getVersion()
```

### setLogLevel

##### Syntax

```javascript
setLogLevel: function(level as integer) as void
```
- `@param level as integer : the accepted values are (VERBOSE: 0, DEBUG: 1, INFO: 2, WARNING: 3, ERROR: 4)`

##### Example 

```javascript
  ADB_CONSTANTS = AdobeSDKConstants()
  m.adobeEdgeSdk.setLogLevel(ADB_CONSTANTS.LOG_LEVEL.VERBOSE)
```

### updateConfiguration

> Call this function before using any other public APIs. For example, if calling sendEdgeEvent() without a valid configuration in the SDK, the SDK will drop the Edge event.

##### Syntax

```javascript
setConfiguration: function(configuration as object) as void
```
- `@param configuration as object`

##### Example 

```javascript
  configuration = {
    edge: {
      configId: "123-abc-xyz"
    }
  }
  m.adobeEdgeSdk.updateConfiguration(configuration)
```

### sendEdgeEvent

Sends an Experience event to Edge Network.

##### Syntax

```javascript
sendEdgeEvent: function(xdmData as object, callback = _adb_default_callback as function, context = invalid as dynamic) as void
```
- `@param data as object : xdm data`
- `@param [optional] callback as function(context, result) : handle Edge response`
- `@param [optional] context as dynamic : context to be passed to the callback function`

##### Example 1

```javascript
  m.adobeEdgeSdk.sendEdgeEvent({
    eventType: "commerce.orderPlaced",
      commerce: {
        .....
      }
  })
```
##### Example 2
```javascript
  m.adobeEdgeSdk.sendEdgeEvent({
      eventType: "commerce.orderPlaced",
      commerce: {
        .....
      }
  }, sub(context, result)
      print "callback result: "
      print result
      print context
  end sub, context)
```

### setExperienceCloudId

> By default, the Edge SDK automatically generates an ECID (Experience Cloud ID) when first used. If the Edge SDK and the previous [media SDK](https://experienceleague.adobe.com/docs/media-analytics/using/media-use-cases/sdk-track-scenegraph.html?lang=en#global-methods-for-mediaheartbeat) are initialized in the same channel, calling this function can keep both SDKs running with the same ECID.

##### Syntax

```javascript
setExperienceCloudId: function(ecid as string) as void
```

- `@param ecid as string : the ECID generated by the previous media SDK`

##### Example 

```javascript
  mid_from_media_sdk = "0123456789"
  m.adobeEdgeSdk.setExperienceCloudId(mid_from_media_sdk)
```

### shutdown 

##### Syntax

```javascript
shutdown: function() as void
```

##### Example 

```javascript
  m.adobeEdgeSdk.shutdown()
```
